(()=>{document.querySelector("#city").addEventListener("keypress",(e=>{console.log("enter key pressed")})),document.querySelector("#fetch").addEventListener("click",(async e=>{if(!localStorage.apiKey)return void alert("Please Add API Key");const t=document.querySelector("#city").value,n=await async function(e){const t=`https://api.weatherapi.com/v1/current.json?key=${JSON.parse(localStorage.apiKey)}&q=${e}`;let n;console.log(t);try{const e=await fetch(t,{mode:"cors"}),o=await e.json();n=o,console.log(o)}catch(e){console.error(`API Error: ${e.message}`)}return n}(t);console.log(n.current.condition.text),"Sunny"===n.current.condition.text&&function(){const e=[],t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.pointerEvents="none",t.width=window.innerWidth,t.height=window.innerHeight,document.body.appendChild(t);const n=t.getContext("2d"),o=()=>({x:Math.random()*t.width,y:Math.random()*t.height,radius:Math.floor(5*Math.random()+1),color:"#EDEDED",speed:1*Math.random()+2,sway:Math.random()-.5}),r=e=>{n.beginPath(),n.arc(e.x,e.y,e.radius,0,2*Math.PI),n.fillStyle=e.color,n.fill(),n.closePath()};r(o());const i=()=>{n.clearRect(0,0,t.width,t.height),e.forEach((e=>{(e=>{e.y+=e.speed,e.x+=e.sway,e.y>t.height&&Object.assign(e,o())})(e),r(e)})),requestAnimationFrame(i)};for(let t=0;t<300;t++)e.push(o());i(),window.addEventListener("resize",(()=>{t.width=window.innerWidth,t.height=window.innerHeight})),window.addEventListener("scroll",(()=>{t.style.top=`${window.scrollY}px`}))}(),e.preventDefault()}));const e=document.querySelector(".main"),t=document.createElement("button");t.textContent="Add API Key",t.id="api-key-button",t.addEventListener("click",(()=>{const e=prompt("Enter API Key:");localStorage.apiKey=JSON.stringify(e)})),e.appendChild(t)})();